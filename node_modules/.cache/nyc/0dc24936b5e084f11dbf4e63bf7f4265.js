'use strict';var cov_2dac3mbczz=function(){var path="C:\\Users\\HP\\Desktop\\theBootcamp\\v1\\models\\questionsModels.js",hash="27f344152fba3b0758526ce67b258cb5dfb52960",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\HP\\Desktop\\theBootcamp\\v1\\models\\questionsModels.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:19},end:{line:7,column:563}},"2":{start:{line:7,column:76},end:{line:7,column:347}},"3":{start:{line:7,column:134},end:{line:7,column:142}},"4":{start:{line:7,column:144},end:{line:7,column:199}},"5":{start:{line:7,column:200},end:{line:7,column:231}},"6":{start:{line:7,column:232},end:{line:7,column:286}},"7":{start:{line:7,column:259},end:{line:7,column:286}},"8":{start:{line:7,column:287},end:{line:7,column:345}},"9":{start:{line:7,column:350},end:{line:7,column:559}},"10":{start:{line:7,column:407},end:{line:7,column:475}},"11":{start:{line:7,column:423},end:{line:7,column:475}},"12":{start:{line:7,column:476},end:{line:7,column:536}},"13":{start:{line:7,column:493},end:{line:7,column:536}},"14":{start:{line:7,column:537},end:{line:7,column:556}},"15":{start:{line:9,column:14},end:{line:9,column:31}},"16":{start:{line:11,column:15},end:{line:11,column:46}},"17":{start:{line:13,column:12},end:{line:13,column:27}},"18":{start:{line:15,column:13},end:{line:15,column:42}},"19":{start:{line:17,column:21},end:{line:17,column:47}},"20":{start:{line:19,column:22},end:{line:19,column:60}},"21":{start:{line:21,column:19},end:{line:21,column:43}},"22":{start:{line:23,column:20},end:{line:23,column:56}},"23":{start:{line:25,column:39},end:{line:25,column:93}},"24":{start:{line:27,column:50},end:{line:27,column:151}},"25":{start:{line:27,column:92},end:{line:27,column:149}},"26":{start:{line:29,column:15},end:{line:188,column:3}},"27":{start:{line:31,column:4},end:{line:31,column:36}},"28":{start:{line:33,column:4},end:{line:33,column:24}},"29":{start:{line:34,column:4},end:{line:34,column:20}},"30":{start:{line:37,column:2},end:{line:185,column:6}},"31":{start:{line:40,column:22},end:{line:40,column:67}},"32":{start:{line:41,column:20},end:{line:41,column:63}},"33":{start:{line:42,column:24},end:{line:52,column:7}},"34":{start:{line:53,column:6},end:{line:53,column:39}},"35":{start:{line:54,column:6},end:{line:54,column:25}},"36":{start:{line:62,column:6},end:{line:64,column:9}},"37":{start:{line:63,column:8},end:{line:63,column:46}},"38":{start:{line:72,column:6},end:{line:74,column:9}},"39":{start:{line:73,column:8},end:{line:73,column:43}},"40":{start:{line:82,column:24},end:{line:82,column:47}},"41":{start:{line:83,column:18},end:{line:83,column:53}},"42":{start:{line:84,column:6},end:{line:84,column:38}},"43":{start:{line:85,column:6},end:{line:85,column:28}},"44":{start:{line:90,column:6},end:{line:92,column:9}},"45":{start:{line:91,column:8},end:{line:91,column:50}},"46":{start:{line:98,column:24},end:{line:98,column:52}},"47":{start:{line:100,column:20},end:{line:100,column:63}},"48":{start:{line:102,column:22},end:{line:102,column:67}},"49":{start:{line:103,column:22},end:{line:105,column:8}},"50":{start:{line:104,column:8},end:{line:104,column:43}},"51":{start:{line:109,column:30},end:{line:111,column:8}},"52":{start:{line:110,column:8},end:{line:110,column:55}},"53":{start:{line:113,column:6},end:{line:137,column:7}},"54":{start:{line:116,column:8},end:{line:127,column:9}},"55":{start:{line:119,column:10},end:{line:122,column:11}},"56":{start:{line:121,column:12},end:{line:121,column:19}},"57":{start:{line:123,column:10},end:{line:126,column:11}},"58":{start:{line:124,column:12},end:{line:124,column:38}},"59":{start:{line:125,column:12},end:{line:125,column:36}},"60":{start:{line:129,column:18},end:{line:134,column:9}},"61":{start:{line:135,column:8},end:{line:135,column:29}},"62":{start:{line:136,column:8},end:{line:136,column:32}},"63":{start:{line:143,column:24},end:{line:143,column:52}},"64":{start:{line:145,column:20},end:{line:145,column:63}},"65":{start:{line:147,column:22},end:{line:147,column:67}},"66":{start:{line:149,column:22},end:{line:151,column:8}},"67":{start:{line:150,column:8},end:{line:150,column:43}},"68":{start:{line:154,column:30},end:{line:156,column:8}},"69":{start:{line:155,column:8},end:{line:155,column:55}},"70":{start:{line:158,column:6},end:{line:183,column:7}},"71":{start:{line:161,column:8},end:{line:173,column:9}},"72":{start:{line:165,column:10},end:{line:168,column:11}},"73":{start:{line:167,column:12},end:{line:167,column:19}},"74":{start:{line:169,column:10},end:{line:172,column:11}},"75":{start:{line:170,column:12},end:{line:170,column:36}},"76":{start:{line:171,column:12},end:{line:171,column:38}},"77":{start:{line:175,column:18},end:{line:180,column:9}},"78":{start:{line:181,column:8},end:{line:181,column:29}},"79":{start:{line:182,column:8},end:{line:182,column:34}},"80":{start:{line:187,column:2},end:{line:187,column:18}},"81":{start:{line:190,column:0},end:{line:190,column:33}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:7,column:19},end:{line:7,column:20}},loc:{start:{line:7,column:31},end:{line:7,column:561}},line:7},"1":{name:"defineProperties",decl:{start:{line:7,column:42},end:{line:7,column:58}},loc:{start:{line:7,column:74},end:{line:7,column:349}},line:7},"2":{name:"(anonymous_2)",decl:{start:{line:7,column:357},end:{line:7,column:358}},loc:{start:{line:7,column:405},end:{line:7,column:558}},line:7},"3":{name:"_interopRequireDefault",decl:{start:{line:25,column:9},end:{line:25,column:31}},loc:{start:{line:25,column:37},end:{line:25,column:95}},line:25},"4":{name:"_classCallCheck",decl:{start:{line:27,column:9},end:{line:27,column:24}},loc:{start:{line:27,column:48},end:{line:27,column:153}},line:27},"5":{name:"(anonymous_5)",decl:{start:{line:29,column:15},end:{line:29,column:16}},loc:{start:{line:29,column:27},end:{line:188,column:1}},line:29},"6":{name:"Question",decl:{start:{line:30,column:11},end:{line:30,column:19}},loc:{start:{line:30,column:22},end:{line:35,column:3}},line:30},"7":{name:"askQuestion",decl:{start:{line:39,column:20},end:{line:39,column:31}},loc:{start:{line:39,column:38},end:{line:55,column:5}},line:39},"8":{name:"getMeetupQuestions",decl:{start:{line:61,column:20},end:{line:61,column:38}},loc:{start:{line:61,column:49},end:{line:65,column:5}},line:61},"9":{name:"(anonymous_9)",decl:{start:{line:62,column:35},end:{line:62,column:36}},loc:{start:{line:62,column:55},end:{line:64,column:7}},line:62},"10":{name:"getUserQuestions",decl:{start:{line:71,column:20},end:{line:71,column:36}},loc:{start:{line:71,column:45},end:{line:75,column:5}},line:71},"11":{name:"(anonymous_11)",decl:{start:{line:72,column:35},end:{line:72,column:36}},loc:{start:{line:72,column:56},end:{line:74,column:7}},line:72},"12":{name:"_delete",decl:{start:{line:81,column:20},end:{line:81,column:27}},loc:{start:{line:81,column:40},end:{line:86,column:5}},line:81},"13":{name:"forDel",decl:{start:{line:89,column:20},end:{line:89,column:26}},loc:{start:{line:89,column:39},end:{line:93,column:5}},line:89},"14":{name:"(anonymous_14)",decl:{start:{line:90,column:33},end:{line:90,column:34}},loc:{start:{line:90,column:53},end:{line:92,column:7}},line:90},"15":{name:"requestUpvote",decl:{start:{line:96,column:20},end:{line:96,column:33}},loc:{start:{line:96,column:40},end:{line:138,column:5}},line:96},"16":{name:"(anonymous_16)",decl:{start:{line:103,column:40},end:{line:103,column:41}},loc:{start:{line:103,column:56},end:{line:105,column:7}},line:103},"17":{name:"(anonymous_17)",decl:{start:{line:109,column:45},end:{line:109,column:46}},loc:{start:{line:109,column:65},end:{line:111,column:7}},line:109},"18":{name:"requestDownvote",decl:{start:{line:141,column:20},end:{line:141,column:35}},loc:{start:{line:141,column:42},end:{line:184,column:5}},line:141},"19":{name:"(anonymous_19)",decl:{start:{line:149,column:40},end:{line:149,column:41}},loc:{start:{line:149,column:56},end:{line:151,column:7}},line:149},"20":{name:"(anonymous_20)",decl:{start:{line:154,column:45},end:{line:154,column:46}},loc:{start:{line:154,column:65},end:{line:156,column:7}},line:154}},branchMap:{"0":{loc:{start:{line:7,column:168},end:{line:7,column:198}},type:"binary-expr",locations:[{start:{line:7,column:168},end:{line:7,column:189}},{start:{line:7,column:193},end:{line:7,column:198}}],line:7},"1":{loc:{start:{line:7,column:232},end:{line:7,column:286}},type:"if",locations:[{start:{line:7,column:232},end:{line:7,column:286}},{start:{line:7,column:232},end:{line:7,column:286}}],line:7},"2":{loc:{start:{line:7,column:407},end:{line:7,column:475}},type:"if",locations:[{start:{line:7,column:407},end:{line:7,column:475}},{start:{line:7,column:407},end:{line:7,column:475}}],line:7},"3":{loc:{start:{line:7,column:476},end:{line:7,column:536}},type:"if",locations:[{start:{line:7,column:476},end:{line:7,column:536}},{start:{line:7,column:476},end:{line:7,column:536}}],line:7},"4":{loc:{start:{line:25,column:46},end:{line:25,column:92}},type:"cond-expr",locations:[{start:{line:25,column:70},end:{line:25,column:73}},{start:{line:25,column:76},end:{line:25,column:92}}],line:25},"5":{loc:{start:{line:25,column:46},end:{line:25,column:67}},type:"binary-expr",locations:[{start:{line:25,column:46},end:{line:25,column:49}},{start:{line:25,column:53},end:{line:25,column:67}}],line:25},"6":{loc:{start:{line:27,column:50},end:{line:27,column:151}},type:"if",locations:[{start:{line:27,column:50},end:{line:27,column:151}},{start:{line:27,column:50},end:{line:27,column:151}}],line:27},"7":{loc:{start:{line:113,column:6},end:{line:137,column:7}},type:"if",locations:[{start:{line:113,column:6},end:{line:137,column:7}},{start:{line:113,column:6},end:{line:137,column:7}}],line:113},"8":{loc:{start:{line:113,column:10},end:{line:113,column:45}},type:"binary-expr",locations:[{start:{line:113,column:10},end:{line:113,column:21}},{start:{line:113,column:25},end:{line:113,column:34}},{start:{line:113,column:38},end:{line:113,column:45}}],line:113},"9":{loc:{start:{line:116,column:8},end:{line:127,column:9}},type:"if",locations:[{start:{line:116,column:8},end:{line:127,column:9}},{start:{line:116,column:8},end:{line:127,column:9}}],line:116},"10":{loc:{start:{line:119,column:10},end:{line:122,column:11}},type:"if",locations:[{start:{line:119,column:10},end:{line:122,column:11}},{start:{line:119,column:10},end:{line:122,column:11}}],line:119},"11":{loc:{start:{line:119,column:14},end:{line:119,column:97}},type:"binary-expr",locations:[{start:{line:119,column:14},end:{line:119,column:49}},{start:{line:119,column:53},end:{line:119,column:97}}],line:119},"12":{loc:{start:{line:123,column:10},end:{line:126,column:11}},type:"if",locations:[{start:{line:123,column:10},end:{line:126,column:11}},{start:{line:123,column:10},end:{line:126,column:11}}],line:123},"13":{loc:{start:{line:123,column:14},end:{line:123,column:99}},type:"binary-expr",locations:[{start:{line:123,column:14},end:{line:123,column:51}},{start:{line:123,column:55},end:{line:123,column:99}}],line:123},"14":{loc:{start:{line:158,column:6},end:{line:183,column:7}},type:"if",locations:[{start:{line:158,column:6},end:{line:183,column:7}},{start:{line:158,column:6},end:{line:183,column:7}}],line:158},"15":{loc:{start:{line:158,column:10},end:{line:158,column:45}},type:"binary-expr",locations:[{start:{line:158,column:10},end:{line:158,column:21}},{start:{line:158,column:25},end:{line:158,column:34}},{start:{line:158,column:38},end:{line:158,column:45}}],line:158},"16":{loc:{start:{line:161,column:8},end:{line:173,column:9}},type:"if",locations:[{start:{line:161,column:8},end:{line:173,column:9}},{start:{line:161,column:8},end:{line:173,column:9}}],line:161},"17":{loc:{start:{line:165,column:10},end:{line:168,column:11}},type:"if",locations:[{start:{line:165,column:10},end:{line:168,column:11}},{start:{line:165,column:10},end:{line:168,column:11}}],line:165},"18":{loc:{start:{line:165,column:14},end:{line:165,column:99}},type:"binary-expr",locations:[{start:{line:165,column:14},end:{line:165,column:51}},{start:{line:165,column:55},end:{line:165,column:99}}],line:165},"19":{loc:{start:{line:169,column:10},end:{line:172,column:11}},type:"if",locations:[{start:{line:169,column:10},end:{line:172,column:11}},{start:{line:169,column:10},end:{line:172,column:11}}],line:169},"20":{loc:{start:{line:169,column:14},end:{line:169,column:97}},type:"binary-expr",locations:[{start:{line:169,column:14},end:{line:169,column:49}},{start:{line:169,column:53},end:{line:169,column:97}}],line:169}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_2dac3mbczz.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _createClass=(cov_2dac3mbczz.s[1]++,function(){cov_2dac3mbczz.f[0]++;function defineProperties(target,props){cov_2dac3mbczz.f[1]++;cov_2dac3mbczz.s[2]++;for(var i=0;i<props.length;i++){var descriptor=(cov_2dac3mbczz.s[3]++,props[i]);cov_2dac3mbczz.s[4]++;descriptor.enumerable=(cov_2dac3mbczz.b[0][0]++,descriptor.enumerable)||(cov_2dac3mbczz.b[0][1]++,false);cov_2dac3mbczz.s[5]++;descriptor.configurable=true;cov_2dac3mbczz.s[6]++;if("value"in descriptor){cov_2dac3mbczz.b[1][0]++;cov_2dac3mbczz.s[7]++;descriptor.writable=true;}else{cov_2dac3mbczz.b[1][1]++;}cov_2dac3mbczz.s[8]++;Object.defineProperty(target,descriptor.key,descriptor);}}cov_2dac3mbczz.s[9]++;return function(Constructor,protoProps,staticProps){cov_2dac3mbczz.f[2]++;cov_2dac3mbczz.s[10]++;if(protoProps){cov_2dac3mbczz.b[2][0]++;cov_2dac3mbczz.s[11]++;defineProperties(Constructor.prototype,protoProps);}else{cov_2dac3mbczz.b[2][1]++;}cov_2dac3mbczz.s[12]++;if(staticProps){cov_2dac3mbczz.b[3][0]++;cov_2dac3mbczz.s[13]++;defineProperties(Constructor,staticProps);}else{cov_2dac3mbczz.b[3][1]++;}cov_2dac3mbczz.s[14]++;return Constructor;};}());var _moment=(cov_2dac3mbczz.s[15]++,require('moment'));var _moment2=(cov_2dac3mbczz.s[16]++,_interopRequireDefault(_moment));var _uuid=(cov_2dac3mbczz.s[17]++,require('uuid'));var _uuid2=(cov_2dac3mbczz.s[18]++,_interopRequireDefault(_uuid));var _meetupsModels=(cov_2dac3mbczz.s[19]++,require('./meetupsModels'));var _meetupsModels2=(cov_2dac3mbczz.s[20]++,_interopRequireDefault(_meetupsModels));var _usersModels=(cov_2dac3mbczz.s[21]++,require('./usersModels'));var _usersModels2=(cov_2dac3mbczz.s[22]++,_interopRequireDefault(_usersModels));function _interopRequireDefault(obj){cov_2dac3mbczz.f[3]++;cov_2dac3mbczz.s[23]++;return(cov_2dac3mbczz.b[5][0]++,obj)&&(cov_2dac3mbczz.b[5][1]++,obj.__esModule)?(cov_2dac3mbczz.b[4][0]++,obj):(cov_2dac3mbczz.b[4][1]++,{default:obj});}function _classCallCheck(instance,Constructor){cov_2dac3mbczz.f[4]++;cov_2dac3mbczz.s[24]++;if(!(instance instanceof Constructor)){cov_2dac3mbczz.b[6][0]++;cov_2dac3mbczz.s[25]++;throw new TypeError("Cannot call a class as a function");}else{cov_2dac3mbczz.b[6][1]++;}}var Question=(cov_2dac3mbczz.s[26]++,function(){cov_2dac3mbczz.f[5]++;function Question(){cov_2dac3mbczz.f[6]++;cov_2dac3mbczz.s[27]++;_classCallCheck(this,Question);cov_2dac3mbczz.s[28]++;this.questions=[];cov_2dac3mbczz.s[29]++;this.votes=[];}cov_2dac3mbczz.s[30]++;_createClass(Question,[{key:'askQuestion',value:function askQuestion(data){cov_2dac3mbczz.f[7]++;var theMeetup=(cov_2dac3mbczz.s[31]++,_meetupsModels2.default.getOne(data.meetupId));var theUser=(cov_2dac3mbczz.s[32]++,_usersModels2.default.findUser(data.userId));var theQuestion=(cov_2dac3mbczz.s[33]++,{questionId:_uuid2.default.v4(),createdOn:_moment2.default.now(),createdBy:theUser.firstName+' '+theUser.lastName,userId:theUser.userId,meetupId:theMeetup.meetupId,title:data.title,body:data.body,upvote:data.upvote,downvote:data.downvote});cov_2dac3mbczz.s[34]++;this.questions.push(theQuestion);cov_2dac3mbczz.s[35]++;return theQuestion;}// get all questions related to the meetup
},{key:'getMeetupQuestions',value:function getMeetupQuestions(meetupId){cov_2dac3mbczz.f[8]++;cov_2dac3mbczz.s[36]++;return this.questions.filter(function(question){cov_2dac3mbczz.f[9]++;cov_2dac3mbczz.s[37]++;return question.meetupId===meetupId;});}// get all questions this users has answered
},{key:'getUserQuestions',value:function getUserQuestions(userId){cov_2dac3mbczz.f[10]++;cov_2dac3mbczz.s[38]++;return this.questions.filter(function(questions){cov_2dac3mbczz.f[11]++;cov_2dac3mbczz.s[39]++;return questions.userId===userId;});}// delete a question formely asked
},{key:'delete',value:function _delete(questionId){cov_2dac3mbczz.f[12]++;var theQuestion=(cov_2dac3mbczz.s[40]++,this.forDel(questionId));var index=(cov_2dac3mbczz.s[41]++,this.questions.indexOf(theQuestion));cov_2dac3mbczz.s[42]++;this.questions.splice(index,1);cov_2dac3mbczz.s[43]++;return this.questions;}},{key:'forDel',value:function forDel(questionId){cov_2dac3mbczz.f[13]++;cov_2dac3mbczz.s[44]++;return this.questions.find(function(question){cov_2dac3mbczz.f[14]++;cov_2dac3mbczz.s[45]++;return question.questionId===questionId;});}},{key:'requestUpvote',value:function requestUpvote(data){cov_2dac3mbczz.f[15]++;// does the question exist
var theQuestion=(cov_2dac3mbczz.s[46]++,this.forDel(data.questionId));// does the user exist
var theUser=(cov_2dac3mbczz.s[47]++,_usersModels2.default.findUser(data.userId));// does the meetup exist
var theMeetup=(cov_2dac3mbczz.s[48]++,_meetupsModels2.default.getOne(data.meetupId));var userExist=(cov_2dac3mbczz.s[49]++,this.votes.filter(function(user){cov_2dac3mbczz.f[16]++;cov_2dac3mbczz.s[50]++;return user.userId===data.userId;}));// const meetupExist = this.votes.filter(meetup => meetup.meetupId === data.meetupId);
// const questionExist = this.votes.filter(question => question.questionId === data.questionId);
var userExistQuestion=(cov_2dac3mbczz.s[51]++,userExist.find(function(question){cov_2dac3mbczz.f[17]++;cov_2dac3mbczz.s[52]++;return question.questionId===data.questionId;}));cov_2dac3mbczz.s[53]++;if((cov_2dac3mbczz.b[8][0]++,theQuestion)&&(cov_2dac3mbczz.b[8][1]++,theMeetup)&&(cov_2dac3mbczz.b[8][2]++,theUser)){cov_2dac3mbczz.b[7][0]++;cov_2dac3mbczz.s[54]++;/* Check if the user/meetup/question exist in the votes array */if(userExist){cov_2dac3mbczz.b[9][0]++;cov_2dac3mbczz.s[55]++;// if there is a user in the votes array with this userId then...
// has he interacted with this question?
if((cov_2dac3mbczz.b[11][0]++,userExistQuestion.type==='upvote')&&(cov_2dac3mbczz.b[11][1]++,userExistQuestion.meetupId===data.meetupId)){cov_2dac3mbczz.b[10][0]++;cov_2dac3mbczz.s[56]++;// does the user exist in the user array of usersModels and has already upvoted ?
return;}else{cov_2dac3mbczz.b[10][1]++;}cov_2dac3mbczz.s[57]++;if((cov_2dac3mbczz.b[13][0]++,userExistQuestion.type==='downvote')&&(cov_2dac3mbczz.b[13][1]++,userExistQuestion.meetupId===data.meetupId)){cov_2dac3mbczz.b[12][0]++;cov_2dac3mbczz.s[58]++;theQuestion.downvote-=1;cov_2dac3mbczz.s[59]++;theQuestion.upvote+=1;}else{cov_2dac3mbczz.b[12][1]++;}}else{cov_2dac3mbczz.b[9][1]++;}// User exists in reallife but has not voted this question
var guy=(cov_2dac3mbczz.s[60]++,{userId:data.userId,questionId:data.questionId,meetupId:data.meetupId,type:'upvote'});cov_2dac3mbczz.s[61]++;this.votes.push(guy);cov_2dac3mbczz.s[62]++;theQuestion.upvote+=1;}else{cov_2dac3mbczz.b[7][1]++;}}},{key:'requestDownvote',value:function requestDownvote(data){cov_2dac3mbczz.f[18]++;// does the question exist
var theQuestion=(cov_2dac3mbczz.s[63]++,this.forDel(data.questionId));// does the user exist
var theUser=(cov_2dac3mbczz.s[64]++,_usersModels2.default.findUser(data.userId));// does the meetup exist
var theMeetup=(cov_2dac3mbczz.s[65]++,_meetupsModels2.default.getOne(data.meetupId));var userExist=(cov_2dac3mbczz.s[66]++,this.votes.filter(function(user){cov_2dac3mbczz.f[19]++;cov_2dac3mbczz.s[67]++;return user.userId===data.userId;}));// const meetupExist = this.votes.filter(meetup => meetup.meetupId === data.meetupId);
// const questionExist = this.votes.filter(question => question.questionId === data.questionId);
var userExistQuestion=(cov_2dac3mbczz.s[68]++,userExist.find(function(question){cov_2dac3mbczz.f[20]++;cov_2dac3mbczz.s[69]++;return question.questionId===data.questionId;}));cov_2dac3mbczz.s[70]++;if((cov_2dac3mbczz.b[15][0]++,theQuestion)&&(cov_2dac3mbczz.b[15][1]++,theMeetup)&&(cov_2dac3mbczz.b[15][2]++,theUser)){cov_2dac3mbczz.b[14][0]++;cov_2dac3mbczz.s[71]++;/* Check if the user/meetup/question exist in the votes array */if(userExist){cov_2dac3mbczz.b[16][0]++;cov_2dac3mbczz.s[72]++;// if there is a user in the votes array with this userId then...
// has he userExist(found to exist) interacted with this question?
if((cov_2dac3mbczz.b[18][0]++,userExistQuestion.type==='downvote')&&(cov_2dac3mbczz.b[18][1]++,userExistQuestion.meetupId===data.meetupId)){cov_2dac3mbczz.b[17][0]++;cov_2dac3mbczz.s[73]++;// does the user exist in the user array of usersModels and has already upvoted ?
return;}else{cov_2dac3mbczz.b[17][1]++;}cov_2dac3mbczz.s[74]++;if((cov_2dac3mbczz.b[20][0]++,userExistQuestion.vote==='upvote')&&(cov_2dac3mbczz.b[20][1]++,userExistQuestion.meetupId===data.meetupId)){cov_2dac3mbczz.b[19][0]++;cov_2dac3mbczz.s[75]++;theQuestion.upvote-=1;cov_2dac3mbczz.s[76]++;theQuestion.downvote+=1;}else{cov_2dac3mbczz.b[19][1]++;}}else{cov_2dac3mbczz.b[16][1]++;}// User exists in reallife but has not voted this question
var guy=(cov_2dac3mbczz.s[77]++,{userId:data.userId,questionId:data.questionId,meetupId:data.meetupId,type:'upvote'});cov_2dac3mbczz.s[78]++;this.votes.push(guy);cov_2dac3mbczz.s[79]++;theQuestion.downvote+=1;}else{cov_2dac3mbczz.b[14][1]++;}}}]);cov_2dac3mbczz.s[80]++;return Question;}());cov_2dac3mbczz.s[81]++;exports.default=new Question();//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInF1ZXN0aW9uc01vZGVscy5qcyJdLCJuYW1lcyI6WyJRdWVzdGlvbiIsInF1ZXN0aW9ucyIsInZvdGVzIiwiZGF0YSIsInRoZU1lZXR1cCIsIm1lZXR1cE1vZGVsIiwiZ2V0T25lIiwibWVldHVwSWQiLCJ0aGVVc2VyIiwidXNlck1vZGVsIiwiZmluZFVzZXIiLCJ1c2VySWQiLCJ0aGVRdWVzdGlvbiIsInF1ZXN0aW9uSWQiLCJ1dWlkIiwidjQiLCJjcmVhdGVkT24iLCJtb21lbnQiLCJub3ciLCJjcmVhdGVkQnkiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInRpdGxlIiwiYm9keSIsInVwdm90ZSIsImRvd252b3RlIiwicHVzaCIsImZpbHRlciIsInF1ZXN0aW9uIiwiZm9yRGVsIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZmluZCIsInVzZXJFeGlzdCIsInVzZXIiLCJ1c2VyRXhpc3RRdWVzdGlvbiIsInR5cGUiLCJndXkiLCJ2b3RlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7OztJQUdNQSxRO0FBQ0osc0JBQWM7QUFBQTs7QUFDWixTQUFLQyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0EsU0FBS0MsS0FBTCxHQUFhLEVBQWI7QUFDRDs7OztnQ0FFV0MsSSxFQUFNO0FBQ2hCLFVBQU1DLFlBQVlDLHdCQUFZQyxNQUFaLENBQW1CSCxLQUFLSSxRQUF4QixDQUFsQjtBQUNBLFVBQU1DLFVBQVVDLHNCQUFVQyxRQUFWLENBQW1CUCxLQUFLUSxNQUF4QixDQUFoQjtBQUNBLFVBQU1DLGNBQWM7QUFDbEJDLG9CQUFZQyxlQUFLQyxFQUFMLEVBRE07QUFFbEJDLG1CQUFXQyxpQkFBT0MsR0FBUCxFQUZPO0FBR2xCQyxtQkFBY1gsUUFBUVksU0FBdEIsU0FBbUNaLFFBQVFhLFFBSHpCO0FBSWxCVixnQkFBUUgsUUFBUUcsTUFKRTtBQUtsQkosa0JBQVVILFVBQVVHLFFBTEY7QUFNbEJlLGVBQU9uQixL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dGNhbXAvdjEvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgdXVpZCBmcm9tICd1dWlkJztcclxuaW1wb3J0IG1lZXR1cE1vZGVsIGZyb20gJy4vbWVldHVwc01vZGVscyc7XHJcbmltcG9ydCB1c2VyTW9kZWwgZnJvbSAnLi91c2Vyc01vZGVscyc7XHJcblxyXG5cclxuY2xhc3MgUXVlc3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5xdWVzdGlvbnMgPSBbXTtcclxuICAgIHRoaXMudm90ZXMgPSBbXTtcclxuICB9XHJcblxyXG4gIGFza1F1ZXN0aW9uKGRhdGEpIHtcclxuICAgIGNvbnN0IHRoZU1lZXR1cCA9IG1lZXR1cE1vZGVsLmdldE9uZShkYXRhLm1lZXR1cElkKTtcclxuICAgIGNvbnN0IHRoZVVzZXIgPSB1c2VyTW9kZWwuZmluZFVzZXIoZGF0YS51c2VySWQpO1xyXG4gICAgY29uc3QgdGhlUXVlc3Rpb24gPSB7XHJcbiAgICAgIHF1ZXN0aW9uSWQ6IHV1aWQudjQoKSxcclxuICAgICAgY3JlYXRlZE9uOiBtb21lbnQubm93KCksXHJcbiAgICAgIGNyZWF0ZWRCeTogYCR7dGhlVXNlci5maXJzdE5hbWV9ICR7dGhlVXNlci5sYXN0TmFtZX1gLFxyXG4gICAgICB1c2VySWQ6IHRoZVVzZXIudXNlcklkLFxyXG4gICAgICBtZWV0dXBJZDogdGhlTWVldHVwLm1lZXR1cElkLFxyXG4gICAgICB0aXRsZTogZGF0YS50aXRsZSxcclxuICAgICAgYm9keTogZGF0YS5ib2R5LFxyXG4gICAgICB1cHZvdGU6IGRhdGEudXB2b3RlLFxyXG4gICAgICBkb3dudm90ZTogZGF0YS5kb3dudm90ZSxcclxuICAgIH07XHJcbiAgICB0aGlzLnF1ZXN0aW9ucy5wdXNoKHRoZVF1ZXN0aW9uKTtcclxuICAgIHJldHVybiB0aGVRdWVzdGlvbjtcclxuICB9XHJcblxyXG4gIC8vIGdldCBhbGwgcXVlc3Rpb25zIHJlbGF0ZWQgdG8gdGhlIG1lZXR1cFxyXG4gIGdldE1lZXR1cFF1ZXN0aW9ucyhtZWV0dXBJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMucXVlc3Rpb25zLmZpbHRlcihxdWVzdGlvbiA9PiBxdWVzdGlvbi5tZWV0dXBJZCA9PT0gbWVldHVwSWQpO1xyXG4gIH1cclxuXHJcbiAgLy8gZ2V0IGFsbCBxdWVzdGlvbnMgdGhpcyB1c2VycyBoYXMgYW5zd2VyZWRcclxuICBnZXRVc2VyUXVlc3Rpb25zKHVzZXJJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMucXVlc3Rpb25zLmZpbHRlcihxdWVzdGlvbnMgPT4gcXVlc3Rpb25zLnVzZXJJZCA9PT0gdXNlcklkKTtcclxuICB9XHJcblxyXG4gIC8vIGRlbGV0ZSBhIHF1ZXN0aW9uIGZvcm1lbHkgYXNrZWRcclxuICBkZWxldGUocXVlc3Rpb25JZCkge1xyXG4gICAgY29uc3QgdGhlUXVlc3Rpb24gPSB0aGlzLmZvckRlbChxdWVzdGlvbklkKTtcclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5xdWVzdGlvbnMuaW5kZXhPZih0aGVRdWVzdGlvbik7XHJcbiAgICB0aGlzLnF1ZXN0aW9ucy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgcmV0dXJuIHRoaXMucXVlc3Rpb25zO1xyXG4gIH1cclxuXHJcbiAgZm9yRGVsKHF1ZXN0aW9uSWQpIHtcclxuICAgIHJldHVybiB0aGlzLnF1ZXN0aW9ucy5maW5kKHF1ZXN0aW9uID0+IHF1ZXN0aW9uLnF1ZXN0aW9uSWQgPT09IHF1ZXN0aW9uSWQpO1xyXG4gIH1cclxuXHJcbiAgcmVxdWVzdFVwdm90ZShkYXRhKSB7XHJcbiAgICAvLyBkb2VzIHRoZSBxdWVzdGlvbiBleGlzdFxyXG4gICAgY29uc3QgdGhlUXVlc3Rpb24gPSB0aGlzLmZvckRlbChkYXRhLnF1ZXN0aW9uSWQpO1xyXG4gICAgLy8gZG9lcyB0aGUgdXNlciBleGlzdFxyXG4gICAgY29uc3QgdGhlVXNlciA9IHVzZXJNb2RlbC5maW5kVXNlcihkYXRhLnVzZXJJZCk7XHJcbiAgICAvLyBkb2VzIHRoZSBtZWV0dXAgZXhpc3RcclxuICAgIGNvbnN0IHRoZU1lZXR1cCA9IG1lZXR1cE1vZGVsLmdldE9uZShkYXRhLm1lZXR1cElkKTtcclxuICAgIGNvbnN0IHVzZXJFeGlzdCA9IHRoaXMudm90ZXMuZmlsdGVyKHVzZXIgPT4gdXNlci51c2VySWQgPT09IGRhdGEudXNlcklkKTtcclxuICAgIC8vIGNvbnN0IG1lZXR1cEV4aXN0ID0gdGhpcy52b3Rlcy5maWx0ZXIobWVldHVwID0+IG1lZXR1cC5tZWV0dXBJZCA9PT0gZGF0YS5tZWV0dXBJZCk7XHJcbiAgICAvLyBjb25zdCBxdWVzdGlvbkV4aXN0ID0gdGhpcy52b3Rlcy5maWx0ZXIocXVlc3Rpb24gPT4gcXVlc3Rpb24ucXVlc3Rpb25JZCA9PT0gZGF0YS5xdWVzdGlvbklkKTtcclxuXHJcbiAgICBjb25zdCB1c2VyRXhpc3RRdWVzdGlvbiA9IHVzZXJFeGlzdC5maW5kKHF1ZXN0aW9uID0+IHF1ZXN0aW9uLnF1ZXN0aW9uSWQgPT09IGRhdGEucXVlc3Rpb25JZCk7XHJcblxyXG4gICAgaWYgKHRoZVF1ZXN0aW9uICYmIHRoZU1lZXR1cCAmJiB0aGVVc2VyKSB7XHJcbiAgICAgIC8qIENoZWNrIGlmIHRoZSB1c2VyL21lZXR1cC9xdWVzdGlvbiBleGlzdCBpbiB0aGUgdm90ZXMgYXJyYXkgKi9cclxuXHJcbiAgICAgIGlmICh1c2VyRXhpc3QpIHtcclxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhIHVzZXIgaW4gdGhlIHZvdGVzIGFycmF5IHdpdGggdGhpcyB1c2VySWQgdGhlbi4uLlxyXG4gICAgICAgIC8vIGhhcyBoZSBpbnRlcmFjdGVkIHdpdGggdGhpcyBxdWVzdGlvbj9cclxuICAgICAgICBpZiAodXNlckV4aXN0UXVlc3Rpb24udHlwZSA9PT0gJ3Vwdm90ZScgJiYgKHVzZXJFeGlzdFF1ZXN0aW9uLm1lZXR1cElkID09PSBkYXRhLm1lZXR1cElkKSkge1xyXG4gICAgICAgICAgLy8gZG9lcyB0aGUgdXNlciBleGlzdCBpbiB0aGUgdXNlciBhcnJheSBvZiB1c2Vyc01vZGVscyBhbmQgaGFzIGFscmVhZHkgdXB2b3RlZCA/XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1c2VyRXhpc3RRdWVzdGlvbi50eXBlID09PSAnZG93bnZvdGUnICYmICh1c2VyRXhpc3RRdWVzdGlvbi5tZWV0dXBJZCA9PT0gZGF0YS5tZWV0dXBJZCkpIHtcclxuICAgICAgICAgIHRoZVF1ZXN0aW9uLmRvd252b3RlIC09IDE7XHJcbiAgICAgICAgICB0aGVRdWVzdGlvbi51cHZvdGUgKz0gMTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgLy8gVXNlciBleGlzdHMgaW4gcmVhbGxpZmUgYnV0IGhhcyBub3Qgdm90ZWQgdGhpcyBxdWVzdGlvblxyXG4gICAgICBjb25zdCBndXkgPSB7XHJcbiAgICAgICAgdXNlcklkOiBkYXRhLnVzZXJJZCxcclxuICAgICAgICBxdWVzdGlvbklkOiBkYXRhLnF1ZXN0aW9uSWQsXHJcbiAgICAgICAgbWVldHVwSWQ6IGRhdGEubWVldHVwSWQsXHJcbiAgICAgICAgdHlwZTogJ3Vwdm90ZScsXHJcbiAgICAgIH07XHJcbiAgICAgIHRoaXMudm90ZXMucHVzaChndXkpO1xyXG4gICAgICB0aGVRdWVzdGlvbi51cHZvdGUgKz0gMTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlcXVlc3REb3dudm90ZShkYXRhKSB7XHJcbiAgICAvLyBkb2VzIHRoZSBxdWVzdGlvbiBleGlzdFxyXG4gICAgY29uc3QgdGhlUXVlc3Rpb24gPSB0aGlzLmZvckRlbChkYXRhLnF1ZXN0aW9uSWQpO1xyXG4gICAgLy8gZG9lcyB0aGUgdXNlciBleGlzdFxyXG4gICAgY29uc3QgdGhlVXNlciA9IHVzZXJNb2RlbC5maW5kVXNlcihkYXRhLnVzZXJJZCk7XHJcbiAgICAvLyBkb2VzIHRoZSBtZWV0dXAgZXhpc3RcclxuICAgIGNvbnN0IHRoZU1lZXR1cCA9IG1lZXR1cE1vZGVsLmdldE9uZShkYXRhLm1lZXR1cElkKTtcclxuXHJcbiAgICBjb25zdCB1c2VyRXhpc3QgPSB0aGlzLnZvdGVzLmZpbHRlcih1c2VyID0+IHVzZXIudXNlcklkID09PSBkYXRhLnVzZXJJZCk7XHJcbiAgICAvLyBjb25zdCBtZWV0dXBFeGlzdCA9IHRoaXMudm90ZXMuZmlsdGVyKG1lZXR1cCA9PiBtZWV0dXAubWVldHVwSWQgPT09IGRhdGEubWVldHVwSWQpO1xyXG4gICAgLy8gY29uc3QgcXVlc3Rpb25FeGlzdCA9IHRoaXMudm90ZXMuZmlsdGVyKHF1ZXN0aW9uID0+IHF1ZXN0aW9uLnF1ZXN0aW9uSWQgPT09IGRhdGEucXVlc3Rpb25JZCk7XHJcbiAgICBjb25zdCB1c2VyRXhpc3RRdWVzdGlvbiA9IHVzZXJFeGlzdC5maW5kKHF1ZXN0aW9uID0+IHF1ZXN0aW9uLnF1ZXN0aW9uSWQgPT09IGRhdGEucXVlc3Rpb25JZCk7XHJcblxyXG5cclxuICAgIGlmICh0aGVRdWVzdGlvbiAmJiB0aGVNZWV0dXAgJiYgdGhlVXNlcikge1xyXG4gICAgICAvKiBDaGVjayBpZiB0aGUgdXNlci9tZWV0dXAvcXVlc3Rpb24gZXhpc3QgaW4gdGhlIHZvdGVzIGFycmF5ICovXHJcblxyXG4gICAgICBpZiAodXNlckV4aXN0KSB7XHJcbiAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSB1c2VyIGluIHRoZSB2b3RlcyBhcnJheSB3aXRoIHRoaXMgdXNlcklkIHRoZW4uLi5cclxuICAgICAgICAvLyBoYXMgaGUgdXNlckV4aXN0KGZvdW5kIHRvIGV4aXN0KSBpbnRlcmFjdGVkIHdpdGggdGhpcyBxdWVzdGlvbj9cclxuXHJcbiAgICAgICAgaWYgKHVzZXJFeGlzdFF1ZXN0aW9uLnR5cGUgPT09ICdkb3dudm90ZScgJiYgKHVzZXJFeGlzdFF1ZXN0aW9uLm1lZXR1cElkID09PSBkYXRhLm1lZXR1cElkKSkge1xyXG4gICAgICAgICAgLy8gZG9lcyB0aGUgdXNlciBleGlzdCBpbiB0aGUgdXNlciBhcnJheSBvZiB1c2Vyc01vZGVscyBhbmQgaGFzIGFscmVhZHkgdXB2b3RlZCA/XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1c2VyRXhpc3RRdWVzdGlvbi52b3RlID09PSAndXB2b3RlJyAmJiAodXNlckV4aXN0UXVlc3Rpb24ubWVldHVwSWQgPT09IGRhdGEubWVldHVwSWQpKSB7XHJcbiAgICAgICAgICB0aGVRdWVzdGlvbi51cHZvdGUgLT0gMTtcclxuICAgICAgICAgIHRoZVF1ZXN0aW9uLmRvd252b3RlICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIC8vIFVzZXIgZXhpc3RzIGluIHJlYWxsaWZlIGJ1dCBoYXMgbm90IHZvdGVkIHRoaXMgcXVlc3Rpb25cclxuICAgICAgY29uc3QgZ3V5ID0ge1xyXG4gICAgICAgIHVzZXJJZDogZGF0YS51c2VySWQsXHJcbiAgICAgICAgcXVlc3Rpb25JZDogZGF0YS5xdWVzdGlvbklkLFxyXG4gICAgICAgIG1lZXR1cElkOiBkYXRhLm1lZXR1cElkLFxyXG4gICAgICAgIHR5cGU6ICd1cHZvdGUnLFxyXG4gICAgICB9O1xyXG4gICAgICB0aGlzLnZvdGVzLnB1c2goZ3V5KTtcclxuICAgICAgdGhlUXVlc3Rpb24uZG93bnZvdGUgKz0gMTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IG5ldyBRdWVzdGlvbigpOyJdfQ==