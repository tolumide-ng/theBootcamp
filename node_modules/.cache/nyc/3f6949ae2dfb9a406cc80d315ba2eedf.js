'use strict';var cov_a6tkh93jb=function(){var path="C:\\Users\\HP\\Desktop\\theBootcamp\\v1\\controllers\\meetupsControllers.js",hash="37ceaca012daa6643a68e2488004135349c7d2b9",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"C:\\Users\\HP\\Desktop\\theBootcamp\\v1\\controllers\\meetupsControllers.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:21},end:{line:7,column:55}},"2":{start:{line:9,column:22},end:{line:9,column:60}},"3":{start:{line:11,column:19},end:{line:11,column:51}},"4":{start:{line:13,column:20},end:{line:13,column:56}},"5":{start:{line:15,column:39},end:{line:15,column:93}},"6":{start:{line:17,column:14},end:{line:170,column:1}},"7":{start:{line:20,column:15},end:{line:20,column:23}},"8":{start:{line:21,column:24},end:{line:21,column:63}},"9":{start:{line:22,column:4},end:{line:26,column:5}},"10":{start:{line:23,column:6},end:{line:25,column:9}},"11":{start:{line:27,column:24},end:{line:27,column:60}},"12":{start:{line:28,column:4},end:{line:34,column:7}},"13":{start:{line:37,column:17},end:{line:37,column:68}},"14":{start:{line:38,column:15},end:{line:38,column:23}},"15":{start:{line:39,column:17},end:{line:39,column:60}},"16":{start:{line:40,column:17},end:{line:40,column:41}},"17":{start:{line:41,column:4},end:{line:52,column:5}},"18":{start:{line:42,column:19},end:{line:42,column:55}},"19":{start:{line:43,column:6},end:{line:43,column:13}},"20":{start:{line:44,column:6},end:{line:51,column:9}},"21":{start:{line:53,column:4},end:{line:55,column:7}},"22":{start:{line:58,column:17},end:{line:58,column:36}},"23":{start:{line:59,column:20},end:{line:59,column:58}},"24":{start:{line:60,column:4},end:{line:64,column:5}},"25":{start:{line:61,column:6},end:{line:63,column:9}},"26":{start:{line:65,column:4},end:{line:72,column:7}},"27":{start:{line:75,column:21},end:{line:75,column:53}},"28":{start:{line:76,column:4},end:{line:89,column:5}},"29":{start:{line:77,column:6},end:{line:88,column:9}},"30":{start:{line:80,column:10},end:{line:86,column:12}},"31":{start:{line:90,column:4},end:{line:92,column:7}},"32":{start:{line:95,column:26},end:{line:95,column:61}},"33":{start:{line:96,column:4},end:{line:109,column:5}},"34":{start:{line:97,column:6},end:{line:108,column:9}},"35":{start:{line:100,column:10},end:{line:106,column:12}},"36":{start:{line:110,column:4},end:{line:112,column:7}},"37":{start:{line:116,column:18},end:{line:116,column:67}},"38":{start:{line:117,column:4},end:{line:122,column:5}},"39":{start:{line:118,column:6},end:{line:118,column:56}},"40":{start:{line:119,column:6},end:{line:121,column:9}},"41":{start:{line:123,column:4},end:{line:125,column:7}},"42":{start:{line:128,column:18},end:{line:128,column:67}},"43":{start:{line:129,column:4},end:{line:133,column:5}},"44":{start:{line:130,column:6},end:{line:132,column:9}},"45":{start:{line:134,column:4},end:{line:134,column:43}},"46":{start:{line:135,column:4},end:{line:137,column:7}},"47":{start:{line:144,column:22},end:{line:144,column:73}},"48":{start:{line:145,column:4},end:{line:165,column:5}},"49":{start:{line:146,column:20},end:{line:148,column:8}},"50":{start:{line:147,column:8},end:{line:147,column:55}},"51":{start:{line:149,column:6},end:{line:161,column:7}},"52":{start:{line:150,column:8},end:{line:160,column:11}},"53":{start:{line:153,column:12},end:{line:158,column:14}},"54":{start:{line:162,column:6},end:{line:164,column:9}},"55":{start:{line:166,column:4},end:{line:168,column:7}},"56":{start:{line:172,column:0},end:{line:172,column:26}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:15,column:9},end:{line:15,column:31}},loc:{start:{line:15,column:37},end:{line:15,column:95}},line:15},"1":{name:"createMeetup",decl:{start:{line:18,column:25},end:{line:18,column:37}},loc:{start:{line:18,column:48},end:{line:35,column:3}},line:18},"2":{name:"rsvp",decl:{start:{line:36,column:17},end:{line:36,column:21}},loc:{start:{line:36,column:32},end:{line:56,column:3}},line:36},"3":{name:"findOne",decl:{start:{line:57,column:20},end:{line:57,column:27}},loc:{start:{line:57,column:38},end:{line:73,column:3}},line:57},"4":{name:"findAll",decl:{start:{line:74,column:20},end:{line:74,column:27}},loc:{start:{line:74,column:38},end:{line:93,column:3}},line:74},"5":{name:"(anonymous_5)",decl:{start:{line:79,column:29},end:{line:79,column:30}},loc:{start:{line:79,column:47},end:{line:87,column:9}},line:79},"6":{name:"allUpcomings",decl:{start:{line:94,column:25},end:{line:94,column:37}},loc:{start:{line:94,column:48},end:{line:113,column:3}},line:94},"7":{name:"(anonymous_7)",decl:{start:{line:99,column:34},end:{line:99,column:35}},loc:{start:{line:99,column:60},end:{line:107,column:9}},line:99},"8":{name:"deleteMeetup",decl:{start:{line:114,column:25},end:{line:114,column:37}},loc:{start:{line:114,column:48},end:{line:126,column:3}},line:114},"9":{name:"edit",decl:{start:{line:127,column:17},end:{line:127,column:21}},loc:{start:{line:127,column:32},end:{line:138,column:3}},line:127},"10":{name:"findAttending",decl:{start:{line:139,column:26},end:{line:139,column:39}},loc:{start:{line:139,column:50},end:{line:169,column:3}},line:139},"11":{name:"(anonymous_11)",decl:{start:{line:146,column:59},end:{line:146,column:60}},loc:{start:{line:146,column:77},end:{line:148,column:7}},line:146},"12":{name:"(anonymous_12)",decl:{start:{line:152,column:28},end:{line:152,column:29}},loc:{start:{line:152,column:46},end:{line:159,column:11}},line:152}},branchMap:{"0":{loc:{start:{line:15,column:46},end:{line:15,column:92}},type:"cond-expr",locations:[{start:{line:15,column:70},end:{line:15,column:73}},{start:{line:15,column:76},end:{line:15,column:92}}],line:15},"1":{loc:{start:{line:15,column:46},end:{line:15,column:67}},type:"binary-expr",locations:[{start:{line:15,column:46},end:{line:15,column:49}},{start:{line:15,column:53},end:{line:15,column:67}}],line:15},"2":{loc:{start:{line:22,column:4},end:{line:26,column:5}},type:"if",locations:[{start:{line:22,column:4},end:{line:26,column:5}},{start:{line:22,column:4},end:{line:26,column:5}}],line:22},"3":{loc:{start:{line:22,column:8},end:{line:22,column:90}},type:"binary-expr",locations:[{start:{line:22,column:8},end:{line:22,column:19}},{start:{line:22,column:23},end:{line:22,column:37}},{start:{line:22,column:41},end:{line:22,column:51}},{start:{line:22,column:55},end:{line:22,column:72}},{start:{line:22,column:76},end:{line:22,column:90}}],line:22},"4":{loc:{start:{line:40,column:17},end:{line:40,column:41}},type:"binary-expr",locations:[{start:{line:40,column:17},end:{line:40,column:22}},{start:{line:40,column:26},end:{line:40,column:30}},{start:{line:40,column:34},end:{line:40,column:41}}],line:40},"5":{loc:{start:{line:41,column:4},end:{line:52,column:5}},type:"if",locations:[{start:{line:41,column:4},end:{line:52,column:5}},{start:{line:41,column:4},end:{line:52,column:5}}],line:41},"6":{loc:{start:{line:41,column:8},end:{line:41,column:34}},type:"binary-expr",locations:[{start:{line:41,column:8},end:{line:41,column:14}},{start:{line:41,column:18},end:{line:41,column:24}},{start:{line:41,column:28},end:{line:41,column:34}}],line:41},"7":{loc:{start:{line:60,column:4},end:{line:64,column:5}},type:"if",locations:[{start:{line:60,column:4},end:{line:64,column:5}},{start:{line:60,column:4},end:{line:64,column:5}}],line:60},"8":{loc:{start:{line:76,column:4},end:{line:89,column:5}},type:"if",locations:[{start:{line:76,column:4},end:{line:89,column:5}},{start:{line:76,column:4},end:{line:89,column:5}}],line:76},"9":{loc:{start:{line:96,column:4},end:{line:109,column:5}},type:"if",locations:[{start:{line:96,column:4},end:{line:109,column:5}},{start:{line:96,column:4},end:{line:109,column:5}}],line:96},"10":{loc:{start:{line:117,column:4},end:{line:122,column:5}},type:"if",locations:[{start:{line:117,column:4},end:{line:122,column:5}},{start:{line:117,column:4},end:{line:122,column:5}}],line:117},"11":{loc:{start:{line:129,column:4},end:{line:133,column:5}},type:"if",locations:[{start:{line:129,column:4},end:{line:133,column:5}},{start:{line:129,column:4},end:{line:133,column:5}}],line:129},"12":{loc:{start:{line:145,column:4},end:{line:165,column:5}},type:"if",locations:[{start:{line:145,column:4},end:{line:165,column:5}},{start:{line:145,column:4},end:{line:165,column:5}}],line:145},"13":{loc:{start:{line:149,column:6},end:{line:161,column:7}},type:"if",locations:[{start:{line:149,column:6},end:{line:161,column:7}},{start:{line:149,column:6},end:{line:161,column:7}}],line:149}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0,0],"4":[0,0,0],"5":[0,0],"6":[0,0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_a6tkh93jb.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _meetupsModels=(cov_a6tkh93jb.s[1]++,require('../models/meetupsModels'));var _meetupsModels2=(cov_a6tkh93jb.s[2]++,_interopRequireDefault(_meetupsModels));var _usersModels=(cov_a6tkh93jb.s[3]++,require('../models/usersModels'));var _usersModels2=(cov_a6tkh93jb.s[4]++,_interopRequireDefault(_usersModels));function _interopRequireDefault(obj){cov_a6tkh93jb.f[0]++;cov_a6tkh93jb.s[5]++;return(cov_a6tkh93jb.b[1][0]++,obj)&&(cov_a6tkh93jb.b[1][1]++,obj.__esModule)?(cov_a6tkh93jb.b[0][0]++,obj):(cov_a6tkh93jb.b[0][1]++,{default:obj});}var Meetups=(cov_a6tkh93jb.s[6]++,{createMeetup:function createMeetup(req,res){cov_a6tkh93jb.f[1]++;// all parameters are required
var data=(cov_a6tkh93jb.s[7]++,req.body);var dateHappening=(cov_a6tkh93jb.s[8]++,new Date(data.happeningOn)>new Date());cov_a6tkh93jb.s[9]++;if((cov_a6tkh93jb.b[3][0]++,!data.topic)&&(cov_a6tkh93jb.b[3][1]++,!data.location)&&(cov_a6tkh93jb.b[3][2]++,!data.tags)&&(cov_a6tkh93jb.b[3][3]++,!data.happeningOn)&&(cov_a6tkh93jb.b[3][4]++,!dateHappening)){cov_a6tkh93jb.b[2][0]++;cov_a6tkh93jb.s[10]++;return res.status(422).json({message:'All fields are required'});}else{cov_a6tkh93jb.b[2][1]++;}var createdMeetup=(cov_a6tkh93jb.s[11]++,_meetupsModels2.default.create(data));cov_a6tkh93jb.s[12]++;return res.status(201).json({topic:createdMeetup.topic,location:createdMeetup.location,happeningOn:createdMeetup.happeningOn,tags:createdMeetup.tags,createdOn:createdMeetup.createdOn});},rsvp:function rsvp(req,res){cov_a6tkh93jb.f[2]++;var params=(cov_a6tkh93jb.s[13]++,_meetupsModels2.default.getOne(req.params.meetupId));var data=(cov_a6tkh93jb.s[14]++,req.body);var userId=(cov_a6tkh93jb.s[15]++,_usersModels2.default.findUser(data.userId));var status=(cov_a6tkh93jb.s[16]++,(cov_a6tkh93jb.b[4][0]++,'yes')||(cov_a6tkh93jb.b[4][1]++,'no')||(cov_a6tkh93jb.b[4][2]++,'maybe'));cov_a6tkh93jb.s[17]++;if((cov_a6tkh93jb.b[6][0]++,params)&&(cov_a6tkh93jb.b[6][1]++,userId)&&(cov_a6tkh93jb.b[6][2]++,status)){cov_a6tkh93jb.b[5][0]++;var attend=(cov_a6tkh93jb.s[18]++,_meetupsModels2.default.attend(data));cov_a6tkh93jb.s[19]++;attend;cov_a6tkh93jb.s[20]++;res.status(201).json({status:201,data:[{meetup:attend.meetupId,topic:attend.topic,status:attend.response}]});}else{cov_a6tkh93jb.b[5][1]++;}cov_a6tkh93jb.s[21]++;res.status(422).json({message:'Unprocessable Entity: Confirm the supplied information'});},findOne:function findOne(req,res){cov_a6tkh93jb.f[3]++;var params=(cov_a6tkh93jb.s[22]++,req.params.meetupId);var theMeetup=(cov_a6tkh93jb.s[23]++,_meetupsModels2.default.getOne(params));cov_a6tkh93jb.s[24]++;if(!theMeetup){cov_a6tkh93jb.b[7][0]++;cov_a6tkh93jb.s[25]++;return res.status(404).json({message:'Meetup Not Found'});}else{cov_a6tkh93jb.b[7][1]++;}cov_a6tkh93jb.s[26]++;return res.status(200).json({meetup:theMeetup.meetupId,createdOn:theMeetup.createdOn,topic:theMeetup.topic,location:theMeetup.location,happeningOn:theMeetup.happeningOn,tags:theMeetup.tags});},findAll:function findAll(req,res){cov_a6tkh93jb.f[4]++;var allMeetups=(cov_a6tkh93jb.s[27]++,_meetupsModels2.default.getAll());cov_a6tkh93jb.s[28]++;if(allMeetups.length){cov_a6tkh93jb.b[8][0]++;cov_a6tkh93jb.s[29]++;res.status(200).json({Meetups:allMeetups.length,data:allMeetups.map(function(meetup){cov_a6tkh93jb.f[5]++;cov_a6tkh93jb.s[30]++;return{meetup:meetup.meetupId,topic:meetup.topic,location:meetup.location,happeningOn:meetup.happeningOn,tags:meetup.tags};})});}else{cov_a6tkh93jb.b[8][1]++;}cov_a6tkh93jb.s[31]++;return res.status(404).json({message:'Meetups not found'});},allUpcomings:function allUpcomings(req,res){cov_a6tkh93jb.f[6]++;var upcomingMeetups=(cov_a6tkh93jb.s[32]++,_meetupsModels2.default.upcomings());cov_a6tkh93jb.s[33]++;if(upcomingMeetups.length){cov_a6tkh93jb.b[9][0]++;cov_a6tkh93jb.s[34]++;return res.status(200).json({count:upcomingMeetups.length,data:upcomingMeetups.map(function(upcomingMeetup){cov_a6tkh93jb.f[7]++;cov_a6tkh93jb.s[35]++;return{meetupId:upcomingMeetup.meetupId,topic:upcomingMeetup.topic,location:upcomingMeetup.location,happeningOn:upcomingMeetup.happeningOn,tags:upcomingMeetup.tags};})});}else{cov_a6tkh93jb.b[9][1]++;}cov_a6tkh93jb.s[36]++;return res.status(404).json({message:'No meetups found'});},deleteMeetup:function deleteMeetup(req,res){cov_a6tkh93jb.f[8]++;// Is this a real meetup?
var confirm=(cov_a6tkh93jb.s[37]++,_meetupsModels2.default.getOne(req.body.meetupId));cov_a6tkh93jb.s[38]++;if(confirm){cov_a6tkh93jb.b[10][0]++;cov_a6tkh93jb.s[39]++;_meetupsModels2.default.delete(req.body.meetupId);cov_a6tkh93jb.s[40]++;res.status(200).json({message:'Deleted'});}else{cov_a6tkh93jb.b[10][1]++;}cov_a6tkh93jb.s[41]++;return res.status(404).json({message:'Meetup Not Found'});},edit:function edit(res,req){cov_a6tkh93jb.f[9]++;var confirm=(cov_a6tkh93jb.s[42]++,_meetupsModels2.default.getOne(req.body.meetupId));cov_a6tkh93jb.s[43]++;if(!confirm){cov_a6tkh93jb.b[11][0]++;cov_a6tkh93jb.s[44]++;return res.status(404).json({message:'Meetup not found'});}else{cov_a6tkh93jb.b[11][1]++;}cov_a6tkh93jb.s[45]++;_meetupsModels2.default.edit(req.body);cov_a6tkh93jb.s[46]++;return res.status(200).json({message:'Update Succesful'});},findAttending:function findAttending(req,res){cov_a6tkh93jb.f[10]++;// confirm if meetup exists in meetups
// confirm if meetup exists in attending
// return length and userid of attendees
var meetupExist=(cov_a6tkh93jb.s[47]++,_meetupsModels2.default.getOne(req.params.meetupId));cov_a6tkh93jb.s[48]++;if(meetupExist){cov_a6tkh93jb.b[12][0]++;var confirm=(cov_a6tkh93jb.s[49]++,_meetupsModels2.default.attending.find(function(meetup){cov_a6tkh93jb.f[11]++;cov_a6tkh93jb.s[50]++;return meetup.meetupId===req.params.meetupId;}));cov_a6tkh93jb.s[51]++;if(confirm){cov_a6tkh93jb.b[13][0]++;cov_a6tkh93jb.s[52]++;return res.status(200).json({count:confirm.length,data:confirm.map(function(people){cov_a6tkh93jb.f[12]++;cov_a6tkh93jb.s[53]++;return{meetupId:people.meetupId,userId:people.userId,title:people.title,body:people.body};})});}else{cov_a6tkh93jb.b[13][1]++;}cov_a6tkh93jb.s[54]++;return res.status(404).json({message:'No registered attendants for this meetup'});}else{cov_a6tkh93jb.b[12][1]++;}cov_a6tkh93jb.s[55]++;return res.status(404).json({message:'Meetup does not exist'});}});cov_a6tkh93jb.s[56]++;exports.default=Meetups;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lZXR1cHNDb250cm9sbGVycy5qcyJdLCJuYW1lcyI6WyJNZWV0dXBzIiwiY3JlYXRlTWVldHVwIiwicmVxIiwicmVzIiwiZGF0YSIsImJvZHkiLCJkYXRlSGFwcGVuaW5nIiwiRGF0ZSIsImhhcHBlbmluZ09uIiwidG9waWMiLCJsb2NhdGlvbiIsInRhZ3MiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImNyZWF0ZWRNZWV0dXAiLCJtZWV0dXBNb2RlbCIsImNyZWF0ZSIsImNyZWF0ZWRPbiIsInJzdnAiLCJwYXJhbXMiLCJnZXRPbmUiLCJtZWV0dXBJZCIsInVzZXJJZCIsInVzZXJzTW9kZWwiLCJmaW5kVXNlciIsImF0dGVuZCIsIm1lZXR1cCIsInJlc3BvbnNlIiwiZmluZE9uZSIsInRoZU1lZXR1cCIsImZpbmRBbGwiLCJhbGxNZWV0dXBzIiwiZ2V0QWxsIiwibGVuZ3RoIiwibWFwIiwiYWxsVXBjb21pbmdzIiwidXBjb21pbmdNZWV0dXBzIiwidXBjb21pbmdzIiwiY291bnQiLCJ1cGNvbWluZ01lZXR1cCIsImRlbGV0ZU1lZXR1cCIsImNvbmZpcm0iLCJkZWxldGUiLCJlZGl0IiwiZmluZEF0dGVuZGluZyIsIm1lZXR1cEV4aXN0IiwiYXR0ZW5kaW5nIiwiZmluZCIsInBlb3BsZSIsInRpdGxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7OztBQUNBOzs7Ozs7QUFFQSxJQUFNQSxVQUFVO0FBQ2RDLGNBRGMsd0JBQ0RDLEdBREMsRUFDSUMsR0FESixFQUNTO0FBQ3JCO0FBQ0EsUUFBTUMsT0FBT0YsSUFBSUcsSUFBakI7QUFDQSxRQUFNQyxnQkFBaUIsSUFBSUMsSUFBSixDQUFTSCxLQUFLSSxXQUFkLElBQTZCLElBQUlELElBQUosRUFBcEQ7QUFDQSxRQUFJLENBQUNILEtBQUtLLEtBQU4sSUFBZSxDQUFDTCxLQUFLTSxRQUFyQixJQUFpQyxDQUFDTixLQUFLTyxJQUF2QyxJQUNPLENBQUNQLEtBQUtJLFdBRGIsSUFDNEIsQ0FBQ0YsYUFE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QyxzQkFBUTBCLE9BQU8xQixNQUZZO0FBRzNCMkIscUJBQU9ELE9BQU9DLEtBSGE7QUFJM0I3QyxvQkFBTTRDLE9BQU81QztBQUpjLGFBQVg7QUFBQSxXQUFaO0FBRm9CLFNBQXJCLENBQVA7QUFTRDtBQUNELGFBQU9GLElBQUlTLE1BQUosQ0FBVyxHQUFYLEVBQWdCQyxJQUFoQixDQUFxQjtBQUMxQkMsaUJBQVM7QUFEaUIsT0FBckIsQ0FBUDtBQUdEO0FBQ0QsV0FBT1gsSUFBSVMsTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCO0FBQzFCQyxlQUFTO0FBRGlCLEtBQXJCLENBQVA7QUFHRDtBQXhKYSxDQUFoQjs7a0JBMkplZCxPIiwiZmlsZSI6Im1lZXR1cHNDb250cm9sbGVycy5qcyIsInNvdXJjZVJvb3QiOiJDOi9Vc2Vycy9IUC9EZXNrdG9wL3RoZUJvb3RjYW1wL3YxL2NvbnRyb2xsZXJzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1lZXR1cE1vZGVsIGZyb20gJy4uL21vZGVscy9tZWV0dXBzTW9kZWxzJztcbmltcG9ydCB1c2Vyc01vZGVsIGZyb20gJy4uL21vZGVscy91c2Vyc01vZGVscyc7XG5cbmNvbnN0IE1lZXR1cHMgPSB7XG4gIGNyZWF0ZU1lZXR1cChyZXEsIHJlcykge1xuICAgIC8vIGFsbCBwYXJhbWV0ZXJzIGFyZSByZXF1aXJlZFxuICAgIGNvbnN0IGRhdGEgPSByZXEuYm9keTtcbiAgICBjb25zdCBkYXRlSGFwcGVuaW5nID0gKG5ldyBEYXRlKGRhdGEuaGFwcGVuaW5nT24pID4gbmV3IERhdGUoKSk7XG4gICAgaWYgKCFkYXRhLnRvcGljICYmICFkYXRhLmxvY2F0aW9uICYmICFkYXRhLnRhZ3NcbiAgICAgICAgICAgICYmICFkYXRhLmhhcHBlbmluZ09uICYmICFkYXRlSGFwcGVuaW5nKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjIpLmpzb24oe1xuICAgICAgICBtZXNzYWdlOiAnQWxsIGZpZWxkcyBhcmUgcmVxdWlyZWQnLFxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZWRNZWV0dXAgPSBtZWV0dXBNb2RlbC5jcmVhdGUoZGF0YSk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbiAgICAgIHRvcGljOiBjcmVhdGVkTWVldHVwLnRvcGljLFxuICAgICAgbG9jYXRpb246IGNyZWF0ZWRNZWV0dXAubG9jYXRpb24sXG4gICAgICBoYXBwZW5pbmdPbjogY3JlYXRlZE1lZXR1cC5oYXBwZW5pbmdPbixcbiAgICAgIHRhZ3M6IGNyZWF0ZWRNZWV0dXAudGFncyxcbiAgICAgIGNyZWF0ZWRPbjogY3JlYXRlZE1lZXR1cC5jcmVhdGVkT24sXG4gICAgfSk7XG4gIH0sXG5cbiAgcnN2cChyZXEsIHJlcykge1xuICAgIGNvbnN0IHBhcmFtcyA9IG1lZXR1cE1vZGVsLmdldE9uZShyZXEucGFyYW1zLm1lZXR1cElkKTtcbiAgICBjb25zdCBkYXRhID0gcmVxLmJvZHk7XG4gICAgY29uc3QgdXNlcklkID0gdXNlcnNNb2RlbC5maW5kVXNlcihkYXRhLnVzZXJJZCk7XG4gICAgY29uc3Qgc3RhdHVzID0gJ3llcycgfHwgJ25vJyB8fCAnbWF5YmUnO1xuICAgIGlmIChwYXJhbXMgJiYgdXNlcklkICYmIHN0YXR1cykge1xuICAgICAgY29uc3QgYXR0ZW5kID0gbWVldHVwTW9kZWwuYXR0ZW5kKGRhdGEpO1xuICAgICAgYXR0ZW5kO1xuICAgICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgICBzdGF0dXM6IDIwMSxcbiAgICAgICAgZGF0YTogW3tcbiAgICAgICAgICBtZWV0dXA6IGF0dGVuZC5tZWV0dXBJZCxcbiAgICAgICAgICB0b3BpYzogYXR0ZW5kLnRvcGljLFxuICAgICAgICAgIHN0YXR1czogYXR0ZW5kLnJlc3BvbnNlLFxuICAgICAgICB9XSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXMuc3RhdHVzKDQyMikuanNvbih7XG4gICAgICBtZXNzYWdlOiAnVW5wcm9jZXNzYWJsZSBFbnRpdHk6IENvbmZpcm0gdGhlIHN1cHBsaWVkIGluZm9ybWF0aW9uJyxcbiAgICB9KTtcbiAgfSxcblxuICBmaW5kT25lKHJlcSwgcmVzKSB7XG4gICAgY29uc3QgcGFyYW1zID0gcmVxLnBhcmFtcy5tZWV0dXBJZDtcbiAgICBjb25zdCB0aGVNZWV0dXAgPSBtZWV0dXBNb2RlbC5nZXRPbmUocGFyYW1zKTtcbiAgICBpZiAoIXRoZU1lZXR1cCkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ01lZXR1cCBOb3QgRm91bmQnLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBtZWV0dXA6IHRoZU1lZXR1cC5tZWV0dXBJZCxcbiAgICAgIGNyZWF0ZWRPbjogdGhlTWVldHVwLmNyZWF0ZWRPbixcbiAgICAgIHRvcGljOiB0aGVNZWV0dXAudG9waWMsXG4gICAgICBsb2NhdGlvbjogdGhlTWVldHVwLmxvY2F0aW9uLFxuICAgICAgaGFwcGVuaW5nT246IHRoZU1lZXR1cC5oYXBwZW5pbmdPbixcbiAgICAgIHRhZ3M6IHRoZU1lZXR1cC50YWdzLFxuICAgIH0pO1xuICB9LFxuXG4gIGZpbmRBbGwocmVxLCByZXMpIHtcbiAgICBjb25zdCBhbGxNZWV0dXBzID0gbWVldHVwTW9kZWwuZ2V0QWxsKCk7XG4gICAgaWYgKGFsbE1lZXR1cHMubGVuZ3RoKSB7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIE1lZXR1cHM6IGFsbE1lZXR1cHMubGVuZ3RoLFxuICAgICAgICBkYXRhOiBhbGxNZWV0dXBzLm1hcChtZWV0dXAgPT4gKHtcbiAgICAgICAgICBtZWV0dXA6IG1lZXR1cC5tZWV0dXBJZCxcbiAgICAgICAgICB0b3BpYzogbWVldHVwLnRvcGljLFxuICAgICAgICAgIGxvY2F0aW9uOiBtZWV0dXAubG9jYXRpb24sXG4gICAgICAgICAgaGFwcGVuaW5nT246IG1lZXR1cC5oYXBwZW5pbmdPbixcbiAgICAgICAgICB0YWdzOiBtZWV0dXAudGFncyxcbiAgICAgICAgfSkpLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICBtZXNzYWdlOiAnTWVldHVwcyBub3QgZm91bmQnLFxuICAgIH0pO1xuICB9LFxuXG4gIGFsbFVwY29taW5ncyhyZXEsIHJlcykge1xuICAgIGNvbnN0IHVwY29taW5nTWVldHVwcyA9IG1lZXR1cE1vZGVsLnVwY29taW5ncygpO1xuICAgIGlmICh1cGNvbWluZ01lZXR1cHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBjb3VudDogdXBjb21pbmdNZWV0dXBzLmxlbmd0aCxcbiAgICAgICAgZGF0YTogdXBjb21pbmdNZWV0dXBzLm1hcCh1cGNvbWluZ01lZXR1cCA9PiAoe1xuICAgICAgICAgIG1lZXR1cElkOiB1cGNvbWluZ01lZXR1cC5tZWV0dXBJZCxcbiAgICAgICAgICB0b3BpYzogdXBjb21pbmdNZWV0dXAudG9waWMsXG4gICAgICAgICAgbG9jYXRpb246IHVwY29taW5nTWVldHVwLmxvY2F0aW9uLFxuICAgICAgICAgIGhhcHBlbmluZ09uOiB1cGNvbWluZ01lZXR1cC5oYXBwZW5pbmdPbixcbiAgICAgICAgICB0YWdzOiB1cGNvbWluZ01lZXR1cC50YWdzLFxuICAgICAgICB9KSksXG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgIG1lc3NhZ2U6ICdObyBtZWV0dXBzIGZvdW5kJyxcbiAgICB9KTtcbiAgfSxcblxuICBkZWxldGVNZWV0dXAocmVxLCByZXMpIHtcbiAgICAvLyBJcyB0aGlzIGEgcmVhbCBtZWV0dXA/XG4gICAgY29uc3QgY29uZmlybSA9IG1lZXR1cE1vZGVsLmdldE9uZShyZXEuYm9keS5tZWV0dXBJZCk7XG4gICAgaWYgKGNvbmZpcm0pIHtcbiAgICAgIG1lZXR1cE1vZGVsLmRlbGV0ZShyZXEuYm9keS5tZWV0dXBJZCk7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6ICdEZWxldGVkJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ01lZXR1cCBOb3QgRm91bmQnLFxuICAgIH0pO1xuICB9LFxuXG4gIGVkaXQocmVzLCByZXEpIHtcbiAgICBjb25zdCBjb25maXJtID0gbWVldHVwTW9kZWwuZ2V0T25lKHJlcS5ib2R5Lm1lZXR1cElkKTtcbiAgICBpZiAoIWNvbmZpcm0pIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICAgIG1lc3NhZ2U6ICdNZWV0dXAgbm90IGZvdW5kJyxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBtZWV0dXBNb2RlbC5lZGl0KHJlcS5ib2R5KTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgbWVzc2FnZTogJ1VwZGF0ZSBTdWNjZXNmdWwnLFxuICAgIH0pO1xuICB9LFxuXG4gIGZpbmRBdHRlbmRpbmcocmVxLCByZXMpIHtcbiAgICAvLyBjb25maXJtIGlmIG1lZXR1cCBleGlzdHMgaW4gbWVldHVwc1xuICAgIC8vIGNvbmZpcm0gaWYgbWVldHVwIGV4aXN0cyBpbiBhdHRlbmRpbmdcbiAgICAvLyByZXR1cm4gbGVuZ3RoIGFuZCB1c2VyaWQgb2YgYXR0ZW5kZWVzXG5cbiAgICBjb25zdCBtZWV0dXBFeGlzdCA9IG1lZXR1cE1vZGVsLmdldE9uZShyZXEucGFyYW1zLm1lZXR1cElkKTtcbiAgICBpZiAobWVldHVwRXhpc3QpIHtcbiAgICAgIGNvbnN0IGNvbmZpcm0gPSBtZWV0dXBNb2RlbC5hdHRlbmRpbmcuZmluZChtZWV0dXAgPT4gbWVldHVwLm1lZXR1cElkID09PSByZXEucGFyYW1zLm1lZXR1cElkKTtcbiAgICAgIGlmIChjb25maXJtKSB7XG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgICAgY291bnQ6IGNvbmZpcm0ubGVuZ3RoLFxuICAgICAgICAgIGRhdGE6IGNvbmZpcm0ubWFwKHBlb3BsZSA9PiAoe1xuICAgICAgICAgICAgbWVldHVwSWQ6IHBlb3BsZS5tZWV0dXBJZCxcbiAgICAgICAgICAgIHVzZXJJZDogcGVvcGxlLnVzZXJJZCxcbiAgICAgICAgICAgIHRpdGxlOiBwZW9wbGUudGl0bGUsXG4gICAgICAgICAgICBib2R5OiBwZW9wbGUuYm9keSxcbiAgICAgICAgICB9KSksXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHtcbiAgICAgICAgbWVzc2FnZTogJ05vIHJlZ2lzdGVyZWQgYXR0ZW5kYW50cyBmb3IgdGhpcyBtZWV0dXAnLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7XG4gICAgICBtZXNzYWdlOiAnTWVldHVwIGRvZXMgbm90IGV4aXN0JyxcbiAgICB9KTtcbiAgfSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1lZXR1cHM7XG4iXX0=